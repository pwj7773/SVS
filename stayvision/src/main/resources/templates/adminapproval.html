<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>[계정 승인 관리]</title>
<!-- Core theme CSS (includes Bootstrap)-->
<link href="/css/styles.css" rel="stylesheet" />
</head>
<!-- JavaScript Bundle with Popper -->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/Myscript.js"></script>
<script>
	function checkForm() {
		if (confirm("정말 하시겠습니까?")) {
			return true; // 폼을 서밋합니다.
		} else {
			return false; // 폼을 서밋하지 않습니다.
		}
	}
	
	function selectAll1(selectAll1)  {
		  const checkboxes 
		       = document.getElementsByName('checkedValue1');
		  
		  checkboxes.forEach((checkbox) => {
		    checkbox.checked = selectAll1.checked;
		  })
		}
	
	function selectAll2(selectAll2)  {
		  const checkboxes 
		       = document.getElementsByName('checkedValue2');
		  
		  checkboxes.forEach((checkbox) => {
		    checkbox.checked = selectAll2.checked;
		  })
		}
</script>
</head>
<body>
<div class="d-flex" id="wrapper">
	<!-- Sidebar-->
	<div class="border-end bg-white" id="sidebar-wrapper">
		<div class="sidebar-heading border-bottom bg-light">
			<a href="/loginafter"
				class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
				<svg class="bi me-2" width="40" height="32"></svg> <span
				class="fs-4"><img src="/img/logo (2).png" width="100px"></span>
			</a>
		</div>
		<div class="list-group list-group-flush">
			<div sec:authorize="hasAnyRole('ADMIN','EMP')">
				<a href="/infoBusiness"
					class="list-group-item list-group-item-action list-group-item-light p-3">
					<svg class="bi pe-none me-1" width="16" height="40">
						<img width="20" src="/img/hotel.png">
				    </svg> 업체관리
				</a>
			</div>
			<div>
				<a th:href="@{/complain/boardList(id='complain')}"
					class="list-group-item list-group-item-action list-group-item-light p-3">
					<svg class="bi pe-none me-1" width="16" height="40">
						<img width="20" src="/img/complain.png">
				    </svg> 민원게시판
				</a>
			</div>
			<div>
				<a href="#"
					class="list-group-item list-group-item-action list-group-item-light p-3">
					<svg class="bi pe-none me-1" width="16" height="40">
						<img width="20" src="/img/clock.png">
				    </svg> 예약통계
				</a>
			</div>
			<div>
				<a href="#"
					class="list-group-item list-group-item-action list-group-item-light p-3">
					<svg class="bi pe-none me-1" width="16" height="40">
						<img width="20" src="/img/statics.png">
				    </svg> 통계분석
				</a>
			</div>
			<div sec:authorize="hasRole('ADMIN')">
				<a href="/adminapproval"
					class="list-group-item list-group-item-action list-group-item-light p-3">
					<svg class="bi pe-none me-1" width="16" height="40">
						<img width="20" src="/img/user.png">
				    </svg> 회원목록관리
				</a>
			</div>
			<div>
				<a href="/loginafter"
					class="list-group-item list-group-item-action list-group-item-light p-3">
					<svg class="bi pe-none me-1" width="16" height="40">
						<img width="20" src="/img/home.png">
				    </svg> 홈화면
				</a>
			</div>

		</div>
	</div>
	<!-- Page content wrapper-->
	<div id="page-content-wrapper">
		<!-- Top navigation-->
		<nav
			class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
			<div class="container-fluid">
				<button class="btn btn-primary" id="sidebarToggle">Toggle
					Menu</button>
				<button class="navbar-toggler" type="button"
					data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
					aria-controls="navbarSupportedContent" aria-expanded="false"
					aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav ms-auto mt-2 mt-lg-0">
						<li class="nav-item active"><a class="nav-link" href="#!">Home</a></li>
						<li class="nav-item"><a class="nav-link" href="#!">Link</a></li>
						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle" id="navbarDropdown" href="#"
							role="button" data-bs-toggle="dropdown" aria-haspopup="true"
							aria-expanded="false" th:text="${#authentication.name}"></a>
							<div class="dropdown-menu dropdown-menu-end"
								aria-labelledby="navbarDropdown">
								<a class="dropdown-item" href="/memberupdate">회원정보 수정</a> <a
									class="dropdown-item" onclick="confirmLogout()">로그아웃</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="#!">Something else here</a>
							</div></li>
					</ul>
				</div>
			</div>
		</nav>
		<!-- Page content-->
		
		<!-- 오른쪽 컨텐츠 영역 -->
		<div
			class="w-50 main_content wrapper p-5 mx-auto justify-content-center">
			<div class="main_content p-1 mx-auto justify-content-around">
				<div
					class="emp_cm w-100 d-flex flex-row justify-content-between align-items-center">
	<div>
	<h3>회원 목록</h3>
	<form action="memberdelete" method="post" onsubmit="return checkForm();">
		<table class="table table-sm">
			<tr>
				<th>아이디 (이름)</th>
				<th>사용자 등급</th>
				<td>
					<input type="checkbox" name="checkedValue1" value="selectall1" onclick="selectAll1(this)">
				</td>
			</tr>
			<tr th:each = "m : ${mlist}">
				<td>
			      <span th:text="${m.id}"></span>
			      <span>(</span>
			      <span th:text="${m.name}"></span>
			      <span>)</span>
			    </td>
			    <td>
					<span th:if="${m.roleName == 'ROLE_ADMIN'}">관리자</span>
	        		<span th:if="${m.roleName == 'ROLE_EMP'}">직원</span>
	        		<span th:if="${m.roleName == 'ROLE_USER'}">사용자</span>
	        	</td>
	        	<td th:if="${m.roleName != 'ROLE_ADMIN'}">
	        		<input type="checkbox" th:value="${m.id}" name="checkedValue1">
	        	</td>
	        	<td th:if="${m.roleName == 'ROLE_ADMIN'}"></td>
			</tr>
		</table>
				<input type="submit" value="삭제" name="delete">
				<input type="submit" value="비활성화" name="disabled">
	</form>
	</div>
	<div>
		<h3>가입 승인 대기 목록</h3>
		<h5>(비활성화 계정 목록)</h5>
		<form action="adminapproval" method="post" onsubmit="return checkForm();">
			<table class="table table-sm">
				<tr>
					<th>아이디 (이름)</th>
					<th>요청 등급</th>
					<td>
						<input type="checkbox" name="checkedValue2" value="selectall2" onclick="selectAll2(this)">
					</td>
				</tr>
				<tr th:each = "s : ${slist}">
					<td>
				      <span th:text="${s.id}"></span>
				      <span>(</span>
				      <span th:text="${s.name}"></span>
				      <span>)</span>
				    </td>
					<td>
						<span th:if="${s.roleName == 'ROLE_ADMIN'}">관리자</span>
	        			<span th:if="${s.roleName == 'ROLE_EMP'}">직원</span>
	        			<span th:if="${s.roleName == 'ROLE_USER'}">사용자</span>
	        		</td>
					<td>
						<input type="checkbox" th:value="${s.id}" name="checkedValue2">
					</td>
				</tr>
			</table>
			<input type="submit" name="approval" value="승인">
			<input type="submit" name="refuse" id="refuse" value="거절">
		</form>
	</div>
	</div>
</div>
</div>
</div>
</body>
</html>