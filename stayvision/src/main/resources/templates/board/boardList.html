<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>[글목록]</title>
</head>
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script>
	function pagingFormSubmit(currentPage) {
		
		let form = document.getElementById("pagingForm");
		let page = document.getElementById("page");
		
		page.value = currentPage;
		
		form.submit();
	}
</script>
<body>
<div class="container">
<div class="table-responsive">
<table class="table table-bordered table-hover w-90">
	<tr>
		<th>글 번호</th>
		<th>작성자</th>
		<th>제목</th>
		<th>작성일시</th>
		<th>조회수</th>
	</tr>
	<tr th:each = "b : ${board}">
		<td th:text = "${b.boardNum}"></td>
		<td th:text = "${b.userId}"></td>
		<td>
			<a th:href="@{/boardRead(boardNum=${b.boardNum})}">
				<span th:text = "${b.title}"></span>&nbsp;
			</a>
		</td>
		<td th:text = "${b.inputDate}"></td>
		<td th:text = "${b.viewCount}"></td>
	</tr>
</table>
<a href="/boardWrite" class="btn btn-secondary">글쓰기</a>
</div>
  <form action="/boardList" method="get" id="pagingForm">
	<input type="hidden" name="page" id="page">
	<input th:value="${param.keyword}" type="hidden" name="keyword">
	<input th:value="${param.category}" type="hidden" name="category">
  </form>
<form action="/boardList" method="get">
	<div class="d-flex flex-row bd-highlight mb-3 w-50">
	<select name = "category" class="form-select">
	<option value="title" th:selected = "${category  == 'title'}">제목</option>
	<option value="content" th:selected  = "${category == 'content'}">내용</option>
	<option value="userId" th:selected  = "${category == 'userId'}">작성자</option>
	</select>
	<input th:value="${keyword}" type = "text" name="keyword" placeholder="Search..." class="form-control me-2">
	<input type = "submit" value = "검색하기" class="btn btn-outline-success" >
	</div>
</form>
</div>

<div>
<ul class="pagination justify-content-center">
    <li class="page-item">
      <a class="page-link" th:href = "|javascript:pagingFormSubmit(${navi.currentPage - navi.pagePerGroup})|" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
     
    </li>
    <th:block th:each="counter : ${#numbers.sequence(navi.startPageGroup, navi.endPageGroup)}">
	<li class="page-item" th:if="${counter != 0}">
		<a class="page-link" th:text="${counter}" th:href="|javascript:pagingFormSubmit(${counter})|"></a>
	</li>
	</th:block>

    <li class="page-item">
      <a class="page-link" th:href = "|javascript:pagingFormSubmit(${navi.currentPage + navi.pagePerGroup})|" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
</div>
</body>
</html>