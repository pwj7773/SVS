<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>[글목록]</title>
</head>
<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet" href="/css/main.css">
<!-- JavaScript Bundle with Popper -->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
	function pagingFormSubmit(currentPage) {

		let form = document.getElementById("pagingForm");
		let page = document.getElementById("page");

		page.value = currentPage;

		form.submit();
	}
</script>
<body>
	<header
		class="d-flex flex-wrap justify-content-center py-1 mb-0 border-bottom">
		<a href="/loginafter"
			class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
			<svg class="bi me-2" width="40" height="32">
      </svg> <span class="fs-4"><img src="/img/logo (2).png"
				width="100px" alt=""></span>
		</a>
	</header>
	
	<div class=" d-flex flex-row justify ">

		<div
			class="d-flex flex-column flex-shrink-0 p-3 bg-body-tertiary h-auto">
			<svg class="bi pe-none me-1" width="40" height="32">
      </svg>
			<div class="login-state">
				<sec:authorize access="isAuthenticated()">
					<span th:text="${#authentication.name}"></span>
					<span>님 환영합니다.</span>
					<div>
						<input class="btn btn-secondary" type="button" value="회원정보수정"
							sec:authorize="isAuthenticated()"
							onclick="javascript:location.href='/memberupdate'"> <input
							class="btn btn-secondary" type="button" value="로그아웃"
							sec:authorize="isAuthenticated()" onclick="confirmLogout()">
					</div>
				</sec:authorize>
			</div>
			<hr>
			<ul class="nav nav-pills flex-column mb-auto">
				<li sec:authorize="hasAnyRole('ADMIN','EMP')"><a
					href="/infoBusiness" class="nav-link link-body-emphasis"> <svg
							class="bi pe-none me-1" width="16" height="40">
							<img width="20" src="/img/hotel.png" alt=""></svg> 업체관리
				</a></li>
				<li><a th:href="@{/complain/boardList(id='complain')}"
					class="nav-link link-body-emphasis"> <svg
							class="bi pe-none me-1" width="16" height="40">
							<img width="20" src="/img/complain.png" alt=""></svg> 민원게시판
				</a></li>
				<li><a href="#" class="nav-link link-body-emphasis"> <svg
							class="bi pe-none me-1" width="16" height="40">
							<img width="20" src="/img/clock.png" alt=""></svg> 예약통계
				</a></li>
				<li><a href="#" class="nav-link link-body-emphasis"> <svg
							class="bi pe-none me-1" width="16" height="40">
							<img width="20" src="/img/statics.png" alt=""></svg> 통계분석
				</a></li>
				<li sec:authorize="hasRole('ADMIN')"><a href="adminapproval"
					class="nav-link link-body-emphasis"> <svg
							class="bi pe-none me-1" width="16" height="40">
							<img width="20" src="/img/user.png" alt=""></svg> 회원목록관리
				</a></li>
				<li><a href="/loginafter" class="nav-link link-body-emphasis">
						<svg class="bi pe-none me-1" width="16" height="40">
							<img width="20" src="/img/home.png"></svg> 홈화면
				</a></li>
			</ul>
		</div>
		<div class="table-responsive w-75 p-3 ">
	<h1 th:text="${param.id}"></h1>
			<table  class="table table-bordered table-hover " >
				<tr>
					<th>글 번호</th>
					<th>작성자</th>
					<th>제목</th>
					<th>작성일시</th>
					<th>조회수</th>
				</tr>
				<tr th:each="b : ${board}">
					<td th:text="${b.boardNum}"></td>
					<td th:text="${b.userId}"></td>
					<td><a th:href="@{|/${id}/boardRead?boardNum=${b.boardNum}|}">
							<span th:text="${b.title}"></span>&nbsp;
					</a></td>
					<td th:text="${b.inputDate}"></td>
					<td th:text="${b.viewCount}"></td>
				</tr>
			</table>
			<a th:href="@{|/${id}/boardWrite?id=${id}|}"
				class="btn btn-secondary">글쓰기</a>
				<br><br> 
			<form th:action="@{|/${id}/boardList|}" method="get" id="pagingForm">
				<input th:value="${param.id}" type="hidden" name="id"> <input
					type="hidden" name="page" id="page"> <input
					th:value="${param.keyword}" type="hidden" name="keyword"> <input
					th:value="${param.category}" type="hidden" name="category">
			</form>
			<form th:action="@{|/${id}/boardList|}" method="get">
				<input th:value="${id}" type="hidden" name="id">
				<div class="d-flex flex-row bd-highlight mb-3 w-50">
					<select name="category" class="form-select">
						<option value="title" th:selected="${category  == 'title'}">제목</option>
						<option value="content" th:selected="${category == 'content'}">내용</option>
						<option value="userId" th:selected="${category == 'userId'}">작성자</option>
					</select> <input th:value="${keyword}" type="text" name="keyword"
						placeholder="Search..." class="form-control me-2"> <input
						type="submit" value="검색하기" class="btn btn-outline-success">
				</div>
			</form>
		</div>
	</div>
		<div>
		<ul class="pagination justify-content-center">
			<li class="page-item"><a class="page-link"
				th:href="|javascript:pagingFormSubmit(${navi.currentPage - navi.pagePerGroup})|"
				aria-label="Previous"> <span aria-hidden="true">&laquo;</span>
			</a></li>
			<li class="page-item"><a class="page-link"
				th:href="|javascript:pagingFormSubmit(${navi.currentPage - 1})|"
				aria-label="Previous"> <span aria-hidden="true">＜</span>
			</a></li>
			<th:block
				th:each="counter : ${#numbers.sequence(navi.startPageGroup, navi.endPageGroup)}">
				<li class="page-item" th:if="${counter != 0}"><a
					class="page-link" th:text="${counter}"
					th:href="|javascript:pagingFormSubmit(${counter})|"></a></li>
			</th:block>
			<li class="page-item"><a class="page-link"
				th:href="|javascript:pagingFormSubmit(${navi.currentPage + 1})|"
				aria-label="Next"> <span aria-hidden="true">＞</span>
			</a></li>
			<li class="page-item"><a class="page-link"
				th:href="|javascript:pagingFormSubmit(${navi.currentPage + navi.pagePerGroup})|"
				aria-label="Next"> <span aria-hidden="true">&raquo;</span>
			</a></li>

		</ul>
	</div>
</body>
</html>